# Create a job to run the training
# Mount Persistent Volume Claim "q-learning-pvc" under "/var/task/_static/"
apiVersion: batch/v1
kind: Job
metadata:
  name: q-learning-job
  namespace: q-learning
spec:
  template:
    spec:
      containers:
      - name: q-learning
        image: registry.example.com/q_learning:0.1.0-bullseye-aarch64
        imagePullPolicy: Always
        volumeMounts:
        - name: q-learning-pvc
          mountPath: /var/task/workspaces/_static/
        command:
          - python3
          - -m
          - q_learning_lab
          - -b 
          - cartpole-v1 
          - -c 
          - /var/task/config/samples/cart_pole_v1.json
      volumes:
      - name: q-learning-pvc
        persistentVolumeClaim:
          claimName: q-learning-pvc
      restartPolicy: Never
  backoffLimit: 4